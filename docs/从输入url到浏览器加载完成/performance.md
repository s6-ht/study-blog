# 浏览器性能相关

首字节（TTFB）：主文档返回第一个字节的时间
白屏时间：可以使用domInteractive-fetchStart时间。
加载时长：
首次有效渲染时长：谷歌提出的，核心思想是当页面的dom结构发生剧烈变化的时候，就是主要内容渲染的时长。
首次内容渲染/首次渲染：performance.getEntriesByType('paint')
首屏加载时长（AFT）：
首次可交互时长（TTI）：


三大核心指标：
- LCP：最大内容绘制
- FID：首次输入延迟
- CLS：累计位移偏移

web-vitals
参考资料：https://juejin.cn/post/6850037270729359367


### 优化建议

1. 网络传输方面优化：
- 设置浏览器缓存（强缓存、协商缓存）
- 服务端配置 Gzip 进一步再压缩文件体积
- 使用http2.0协议

2. 资源优化
- 压缩文件、使用 Tree-shaking 删除无用代码
- 使用 CDN 加载资源及 dns-prefetch 预解析 DNS 的 IP 地址
- 资源按需加载
- 图片资源优化（雪碧图、字体图标）
- 资源打包压缩（减少请求数、减小请求资源体积、提升网络传输速率）

3. 页面渲染优化：
- 减少重绘和回流的次数
  - 使用class批量操作dom元素的样式
  - dom元素离线更新
  - 图片在渲染前指定大小，因为图片为内联元素，在图片加载后可能会改变宽高，可能会导致回流。或者让其脱离文档流。
- 耗时任务优化：
  - 使用 Web Worker 将耗时任务丢到子线程中，这样能让主线程在不卡顿的情况下处理 JS 任务

在项目中做过的优化：
- 路由懒加载，让每个模块单独被打包为一个js，首屏加载值会加载当前模块引入的js。
- 引入第三方库时，进行按需加载。
- 将第三方内容通过externals进行外部加载
- 尽量减少重绘和回流
- 使用for循环的时候给元素加key